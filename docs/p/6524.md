---
title: "部落战的匹配值是什么？如何查看？"
description: "多年来，匹配值一直都是很热门的话题，我经常能看到有人问这个。之前也想过写这么一篇文章，但由于我退游已久，没有写新文章的热情，所以一直搁置。这两天突然想起来这个事，感觉再搁置的话各位恐怕永远都看不到这篇文章了，干脆就把文章写了。"
module: posts-knowledge
canonical: /p/6524
featuredImg: /p/6524/C6C1E32B4F540D562584350473425F3E.jpg
authorId: cocservice
lastCreated: 2024-06-03T07:03:49+08:00
lastUpdated: 2025-01-20T23:05:26+08:00
tags: clan-wars, matching-value
---

<PostHistory>
2025-01-20 修订：添加 17 本的匹配值。
</PostHistory>

多年来，匹配值一直都是很热门的话题，我经常能看到有人问这个。之前也想过写这么一篇文章，但由于我退游已久，没有写新文章的热情，所以一直搁置。这两天突然想起来这个事，干脆就把文章写了。

## 一、什么是匹配值

玩家之间对匹配值的理解不是一成不变的，而是有一个变化的过程。为了避免产生歧义，我简单把发展过程讲一下。

匹配值这个词产生于 2014 年，也就是 [部落战](/p/588) 玩法推出后不久。最初玩家发现，在游戏安装包的建筑文件中有个叫 StrengthWeight 的字段，这个字段给每个等级的防御建筑都定义了一个数字。进一步研究发现，所有防御加起来的数字越大，部落战排名也就越靠前，因此大家认为这个数字就是部落战匹配时的依据，并且给这些数字起了个名字：匹配值。

网站里有一篇老文章：[部落战建筑、SCV 值与匹配值的关系](/p/689)，新玩家可能觉得这文章就是乱写，其实不是的。在那个年代，匹配值还真就是那个意思。

当然，如果这个话题就这么简单，那这篇文章也就不会出现了。

大致从 2021 年开始，coc 圈子内开始流行一个叫**资源值**的东西，玩家们发现仓库里的金币、圣水和黑油数量可以一定程度上反映玩家的发育水平。相比于传统的匹配值，资源值的查询极其方便，无需解密游戏安装包，也无需翻出计算器把所有防御的 StrengthWeight 加起来，因此迅速取代了传统的匹配值。

**现在，玩家口中的匹配值通常就是指资源值，下文也以这个意思为准。**

不管是传统的 StrengthWeight，还是新兴的资源值，其本质都是用一个数字量化玩家的发育水平。现在是时候给匹配值下一个定义了：**匹配值是部落冲突中量化玩家发育水平的隐藏值**。

## 二、查看资源值的三个流派

我们知道 coc 不止有一种资源，以哪种资源作为匹配值也是个值得讨论的问题。我这里根据不同的资源种类将玩家群体分为三个流派：金币/圣水派（下方简称为圣水派）、黑油派和蓝矿派。不过在介绍这三个流派之前，我先说一下资源值的查看方式。

- 方法一：自己在部落里发个友谊战，让你部落里的朋友侦察一下你的基地。
    - 优点：可随时查看
    - 缺点：需要有个朋友
- 方法二：在部落战或联赛的战斗日中，侦察你自己的基地，就可以看到自己的匹配值了。如果部落战已经打完了，那么看回放也可以。
    - 优点：自己也能看，不用麻烦别人
    - 缺点：只能在战斗日查看

### 2.1 圣水派

第一个流派的做法是点开侦察界面后直接看左上角，从 11 本开始几本就是最高几万圣水。

<Pic src="/p/6524/521630C234B340DAFCAE13BC87F3189E.jpg" width="1302" height="999" caption="侦察界面的圣水值" maxWidth="434px" />

不同大本等级的最大圣水值见下表。

<Table maxWidth="360px">

| 大本等级 | 最大圣水值 |
|   --:   |     --:   |
|     2   |    2 500  |
|     3   |    6 250  |
|     4   |   12 500  |
|     5   |   20 000  |
|     6   |   30 000  |
|     7   |   40 000  |
|     8   |   55 000  |
|     9   |   70 000  |
|    10   |   90 000  |
|    11   |  110 000  |
|    12   |  120 000  |
|    13   |  130 000  |
|    14   |  140 000  |
|    15   |  150 000  |
|    16   |  160 000  |
|    17   |  170 000  |

</Table>

有没有发现好像在哪儿见过这个表？这不是错觉，上表的圣水值就是 [部落战机制](/p/588) 这篇文章中的“基础资源”，两者就是一个东西。

表格中“最大”这个词怎么理解呢？**当你把对应大本的防御建筑和城墙全部升满后，你的资源值就是这个最大值**，后面的黑油值和矿石值同理。16 本的最大圣水值是 16 万，意思就是当你把 16 本的防御建筑和城墙全部升满后，你的圣水值就是 16 万。这个最大值十分苛刻，经过玩家实测，差三个城墙没满都达不到最大圣水值。

从 6 本开始，每 1000 圣水值是 10 个挡位，比如说 9 本有 15 个挡位，16 和 17 本都有 10 个挡位。

16 本的圣水值可以低于 15 万吗？可以的，如果系统觉得你比较速，防御只是满 14 的水平，那你的圣水值就是 140 000.

16 本满升级 17 本之后 [天鹰火炮](/upgrade/030b-Eagle-Artillery) 没了，那么圣水值会下降吗？会的，下降幅度约为半个大本。黑油和矿石值也会下降，后文不再重复。

升级科技可以提高资源值吗？不能，资源值只跟防御水平有关，因此我觉得用**防御值**这个词代替资源值更符合实际情况。另外，因为部落战匹配对手时是考虑科技的，但资源值只考虑防御，因此你**只能把资源值当作一个比较粗略的参考**，不能当作信仰。

### 2.2 黑油派

国内的 coc 圈子更流行另一种流派，就是进入侦察页面后直接点开黑油罐，查看黑油罐中存储的资源量。

<Pic src="/p/6524/20D6473059F27GC9D3D43CAG7C31463E.jpg" width="1302" height="999" caption="侦察界面的黑油值" maxWidth="434px" />
<Pic src="/p/6524/C6C1E32B4F540D562584350473425F3E.jpg" width="1302" height="999" caption="黑油罐中存储的黑油值" />

细心的你可能已经发现了一个公式：

<PCenter>黑油罐中的黑油值 = 侦察界面的黑油值 × 0.8</PCenter>

这是因为在黑油较少的情况下，大本营和黑油罐的黑油分配比例为 1:4。如果你对分配比例这块内容感兴趣，可以去查看 [掠夺比例这篇文章](/p/639)。

不同大本等级的最大黑油值见下表。

<Table maxWidth="360px">

| 大本等级 | 侦察界面的<br>最大黑油值 | 黑油罐中的<br>最大黑油值 |
|   --:   |            --:          |           --:          |
|     7   |            125          |           100          |
|     8   |            200          |           160          |
|     9   |            330          |           264          |
|    10   |            500          |           400          |
|    11   |            600          |           480          |
|    12   |            650          |           520          |
|    13   |            700          |           560          |
|    14   |            750          |           600          |
|    15   |            800          |           640          |
|    16   |            850          |           680          |
|    17   |           1000          |           800          |

</Table>

从 9 本开始，如果你查看的是黑油罐中的黑油数量，则每 8 滴黑油为一个挡位。比如 9 本有 13 个挡位，16 本有 5 个挡位，17 本有 15 个挡位。

### 2.3 矿石派

16 本更新后，coc 圈子内部产生了一种新兴的流派，也就是矿石派。

<Pic src="/p/6524/2290E888CAD82274F3510F91CFF95FC2.jpg" width="1397" height="1118" caption="侦察界面的矿石值" maxWidth="466px" />

由于紫矿和黄矿的数量太少，精度不够，大家通常只看蓝矿，因此矿石派又称蓝矿派。

以下给出不同大本等级的最大蓝矿值。

<Table maxWidth="360px">

| 大本等级 | 最大蓝矿值 |
|   --:   |    --:    |
|     8   |    380    |
|     9   |    410    |
|    10   |    460    |
|    11   |    560    |
|    12   |    610    |
|    13   |    710    |
|    14   |    810    |
|    15   |    960    |
| 16 - 17 |   1110    |

</Table>

与圣水值和黑油值不同，蓝矿值是连续的，可以精确到个位数，因此这种流派的精度最高。不过由于蓝矿值有以下两个致命缺点，没能流行起来：

1. 多年以来，玩家已经产出大量以圣水和黑油值为基础的攻略，蓝矿值对绝大多数玩家是陌生的。
2. 满 16 和满 17 本的蓝矿值是一样的，因此产生了一种奇怪的关系：17 本满 = 16 本满 > 16 满刚升 17. 这种关系不利于玩家判断这个阵型的防御属于 16 本还是 17 本水平。

## 三、常见问题解答

### 3.1 哪些防御的匹配值更高

这时候你可能会想，我能不能先升匹配值低的建筑，等科技跟上之后再升匹配值高的建筑，这样我的部落战排名就低于我的实际防御水平，我们部落的整体匹配值也降低了。

**这种做法确实可以压低你的部落战排名，从而让你的部落战排名低于你的实际水平，但并不能让你们部落匹配的对手更弱**。为什么呢？因为玩家的部落战排名不怎么看科技，资源值更是只看防御，但部落战匹配对手时科技的权重却相当高，因此资源值就会给大家造成一种错觉：升科技不会大幅提升部落战排名，升防御却会，是不是意味着部落战匹配只看防御？

在 2017 年以前，部落战匹配确实是只看防御，当时甚至产生了 [宝宝号](/p/776) 这种东西，不过后来官方就把这漏洞给补了，所以说这算是老玩家玩剩下的。

那反过来行不行呢？科技只升一两组自己擅长的流派，防御全部升满。当然可以，我们管这种号叫防御宝宝，不过只升一两组科技的话，能使用的组合就太少了，游戏会变得极度枯燥，你确定你能忍受吗？几年如一日地玩同一个流派，那不是人，那是机器。而且单个防御宝宝对部落战的影响可以忽略不计，整个部落防御宝宝占大多数时才能发挥出优势，刷一个号就够枯燥了，刷一堆号想都不敢想。

所以说，我不建议刻意压匹配值，大家该怎么升就怎么升，爱怎么玩怎么玩。

差点忘了正题，哪些防御的匹配值更高呢？我给个大致的排名，大家可以参考：

**大本自带的武器 > 天鹰火炮 > 巨石碑 > 地狱塔 > 投石炮 > 法术塔 ≈ X 连弩 > 带武器的建筑工人小屋 > 其他 AOE 建筑 > 其他单体建筑**

那么哪些科技的匹配值更高呢？这个没办法测试，毕竟科技的匹配值是隐藏的，只能通过大量测试才能摸清楚，我肯定不可能让互刷联盟浪费大量时间去研究这么一个机制，所以只能尝试传统的 StrengthWeight 方案了。根据安装包解析的结果，每个兵种的匹配值都相当于 X 连弩的水平，没有特别突出的，也没有特别低的，而法术的匹配值明显低于兵种，甚至低于普通单体建筑。

在撰写这部分内容时，前世界第一连胜部落的首领提供了宝贵的意见（现在连胜已经断了，部落也已解散），另外他也在网站里写过文章，参见：[coc1785 的个人主页](/p/author/coc1785)。

<Pic src="/p/6524/DMLXI4DDIPKC9O8D3PE3OB.jpg" width="1920" height="1080" caption="813 连胜，截图于 2023/9/9" />

### 3.2 联赛定级大师一需要多少匹配值

游戏经常出新的大本，这个值也会跟着变，所以我没办法给你一个准确值，只能给你一个通用套路。

找出排名在前 15 名或前 30 名的参战人员（具体是 15 还是 30 取决于你开多少人的联赛），计算他们的平均匹配值，如果平均值达到最高大本的前 60% 挡位时，部落可稳定定级到大师一段位。以 17 本版本为例，当参战人员的平均圣水值达到 164 000，或黑油罐中的黑油值达到 728 时，部落可稳定定级到大师一。

这是个比较保守的算法，一般来说降低一点要求也没事，看你愿不愿意承担定级到大师二的风险。

### 3.3 全满玩家的部落战排名是怎么确定的

这个问题网上说啥的都有，根据创号时间排序这个说法最多，但我们不是营销号，没有根据的说法不能采信，所以我们认真查找了相关资料，最终找到了前 Supercell 论坛管理员 Darian 在 Reddit 的回答：[[AMA] I am Clash of Clans Community Manager, Darian - Ask Me Anything](https://www.reddit.com/r/ClashOfClans/comments/c9hac5/comment/esz22s5/?context=3).

Darian 的原话是这样：

> The short answer is that it's difficult to tell how the roster will order when you have a roster of all identical level bases. There are many behind the scenes factors that contribute to this including how your data is stored in the server shards. Given how long the game has been running, sometimes new accounts can move older accounts further down, so in the end it's largely "random" due to a variety of factors.

翻译：

> 简而言之，当你拥有一个发育水平差不多的账号列表时，很难判断玩家排序。玩家排序取决于许多因素，其中包括数据库中数据的存储方式。考虑到游戏已经运营许久，有时候新账号也可以老帐户挤下去，因此基于各种因素，它在很大程度上是随机的。

看来涉及到数据库相关知识了，那我就根据我自己的理解，结合 B 站的这篇文章给大家说一下：[全满玩家在部落战和联赛里依据什么来排名](https://www.bilibili.com/read/cv11275717/)。

当程序员从数据库中查询数据中，可以指定一个或多个排序条件，当所有排序条件都相同时就会按照数据库引擎的顺序返回数据。而在 coc 的程序中只指定了防御值这一个条件，防御值相同时就按照数据库引擎给的顺序排序了。那么数据库引擎的排序规则是什么呢？可以说是随机的。为什么是随机呢？听我往下说。

假如有个数据表，其中包含以下数据：

<Table maxWidth="360px">

| First Name | Last Name |
|    :--     |    :--    |
| Author | Morgan |
| John | Marston |
| Dutch | van der Linde |
| Jack | Marston |
| Hosea | Matthews |
| Sadie | Adler |

</Table>

现在我们模拟一次查询请求，排序条件为按照姓氏（Last Name）排序，不指定其他排序条件，最终运行结果是这样的：

<Table maxWidth="360px">

| First Name | Last Name |
|    :--     |    :--    |
| Sadie | Adler |
| John | Marston |
| Jack | Marston |
| Hosea | Matthews |
| Author | Morgan |
| Dutch | van der Linde |

</Table>

可以看出，当姓氏相同时，最终结果是按照数据库本身的数据存储顺序返回的，John Marston 排在 Jack Marston 前面。

既然我都说了是按照数据库本身的数据存储顺序返回的，那刚才为什么还要说是随机的？那是因为现代数据库都有的数据库压缩和优化技术，比如分库分表、索引优化、删除冷数据等等。要保证数据库的高效运行，这些操作就得经常做，优化过后，数据库本身的存储顺序可能就和一开始存进去的不一样了，取出来的顺序也就不一样了。有可能某次优化后，John Marston 排在了 Jack Marston 后面，下一次优化又到前面了。

coc 也是一样的原理，对于防御值相同的村庄，有可能你一直以来看到的顺序都是固定的，某次维护后就不一样了。

就如 Darain 所说，反正都是不确定的，干脆就说是随机了。