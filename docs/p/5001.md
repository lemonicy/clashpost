---
title: "部落都城突袭奖章计算公式解析"
description: "为了不引起误会，本文称可以用于都城升级的货币为“都城币”，而可以用于购买魔法物品等奖励的货币为“奖章”或者“突袭奖章”。本文的主题是计算突袭奖章，而非都城币。本文以“子城”称呼各个子城，以“都城”称呼都城之巅（而不是整个都城）。"
module: posts-capital
canonical: /p/5001
featuredImg: /p/5001/599cdeb005b4e3426a7ff9367239e1b0684a041d.png
authorId: miku393
lastCreated: 2022-11-23T13:51:25+08:00
lastUpdated: 2025-08-12T05:18:23+08:00
tags: raid-weekends, currency
---

<PostHistory>
2025-08-12 修订：根据 2024 年 4 月更新修订部分内容。
</PostHistory>

本文依照 17.360.28 版本对文章进行修订。由于文章原作者早已退游，本次修订由网站维护人员完成，如后续更新导致数值或者机制再次出现变动，我们不保证同步更新。

## 事先声明

1、为了不引起误会，本文称可以用于都城升级的货币为“都城币”，而可以用于购买魔法物品等奖励的货币为“奖章”或者“突袭奖章”。本文的主题是计算突袭奖章，而非都城币。至于都城币的计算方法详见这篇文章的奖励部分：[都城突袭周末机制详解](/p/6491)。

2、为了不引起误会，本文以“子城”称呼各个子城，以“都城”称呼都城之巅（而不是整个都城）。

3、后文中，“本人”均指文章原作者，而非网站维护人员。

4、在本文的编撰过程中，Dreamer丶小黑、日月星辰、太妙了，我还能改昵称、clou、斫冰扬灵、滑稽、糖糖、仿若君詔对本文提供了思路上的帮助与数据支持和验证。

5、2022 版防守公式由 B 站 [@shohit](https://space.bilibili.com/291019507) 提供。目前计算公式已经改变，不过他的贡献不会被磨灭。

6、本文允许转载，转载时请附带本文的链接并进行完整署名，谢谢合作。

## 一、进攻奖章的计算

在部落突袭中，获得进攻奖章的方法是完全摧毁一个子城或者都城。而获取进攻奖章的数量由且仅由被摧毁子城/都城的大本营等级决定。等级与奖章的对应关系如下表<sup>①②</sup>：

<PCenter>摧毁都城大本营可获得的突袭奖章数量</PCenter>
<Table maxWidth="360px">

| 都城大本等级 | 奖章数量 |
|     --:     |   --:   |
|       1     |     45  |
|       2     |    180  |
|       3     |    360  |
|       4     |    585  |
|       5     |    810  |
|       6     |   1115  |
|       7     |   1240  |
|       8     |   1260  |
|       9     |   1375  |
|      10     |   1450  |

</Table>

<PCenter>摧毁子城大本营可获得的突袭奖章数量</PCenter>
<Table maxWidth="360px">

| 子城大本等级 | 奖章数量 |
|     --:     |   --:   |
|       1     |   135   |
|       2     |   225   |
|       3     |   350   |
|       4     |   405   |
|       5     |   460   |

</Table>

注意：

- 实际战斗中不可能遇到 1 级都城，但 coc 安装包还是写了摧毁 1 级都城可以获得多少突袭奖章。
- 奖章数量只跟都城大本营和子城大本营等级有关，摧毁一个速 10 本和一个满 10 本的主城可以获得的奖章数量是一样的。

举我们自己部落的例子，在上一周的突袭中，部落总共完全摧毁了 3 个 5 级都城，8 个 1 级子城，8 个 2 级子城（没有完全摧毁的话就没奖章）。那么整个部落总共可以获得 3 × 810 + 8 × 135 + 8 × 225 = 5310 突袭奖章。这便是计算的第一步。

计算的第二步便是分配这些奖章。部落都城的突袭奖章进攻收益会按照成员进攻的次数来进行分配，直接用第一步的计算结果除以总进攻次数即可得到每次进攻的奖章。还是接着之前的 5310 奖章继续计算，在这次突袭中，整个部落总共出刀 54 次，那么平均下来每一刀能获得 98.333 奖章。不过，这一数据是被**向上取整**的，也就是每一刀 99 奖章。

最后一步便是按照出刀的次数进行分配，倘若一个成员在突袭中打满 6 刀，那么他就可以获得 99 × 6 = 594 奖章——而这，正好与实际获得的进攻奖章吻合。

<Pic src="/p/5001/599cdeb005b4e3426a7ff9367239e1b0684a041d.png" caption="红圈部分即为进攻奖章" width="1920" height="886" />

根据上面的公式我们可以得到以下的四条结论以及启发：

1、**如果一个子城/都城没有被打到三星，那么就没有任何奖章收益**。所以在突袭快要结束的时候，如果你还有剩余的进攻次数，不要去打尚未被进攻的城，而是先想办法先把没有三星的城补到三星。

2、**奖章收益仅和对方子城/都城的大本营等级相关，与防御科技等无关**。进攻一个满防的城，和进攻一个初本的城，只要大本营等级一致，那么突袭奖章的收益便是一致的。而突袭的匹配则往往会把实力相近的部落匹配到一起，所以在达成升级条件后第一时间升级大本营并补上进攻科技，往往会让你们匹配到和你们类似的本高、攻高、防低的部落，在这个进攻收益远大于防守收益的版本带来更多的奖章收益。

3、**奖章的分配仅仅和进攻次数有关**，换句话说，不论你打得是好还是坏，只要打满 6 次，那么就可以和其他打满 6 次的成员获得相同的奖章收益（**银刀只有 5 次，直接少 1/6 收益亏死**）。所以**不要为了都城币和排行榜去抢别人的图，也不要看到剩下的都城币不多了就不去收尾刀**。这不仅不能给你带来更多收益，还可能引发其他人的不满。此外，根据 1 中所提的结论，不收尾刀甚至还存在导致最终未能三星而损失奖章的风险。但这也不代表你可以摆烂，因为**摆烂带来的是在降低全部落（包括自己的）奖章收益**。此外，在突袭期间**建议各位首领把部落的门锁好**，除了可能会有人偷运都城币以外（这种至少还打了，不会太影响奖章数量），还有可能遇到那种直接开图便秒退的偷奖章分子。他们不会贡献任何收益，反而会因为 5 次的进攻次数偷走其他成员的奖章。

<Pic src="/p/5001/09cd989f5a4c0f04ab87e363dc380fd96a8bc4f2.jpg" caption="打满 5 刀，但 0 都城币" width="2244" height="1080" />
<Pic src="/p/5001/c96472e68450f8485a95020d78a33d223d07484d.jpg" caption="开图秒退" width="2244" height="1080" />

4、在突袭的最终阶段，无法完全摧毁全部子城的情况下，可以用此公式去寻找最大收益。例如可以用同样的刀数摧毁低级和高级的子城，那么首选高级子城。

目前该公式虽然已经经过多方验证，也取得了非常准确的计算效果，但还是希望各位可以用自己部落手头的数据来进行计算，毕竟更多的样本也许便能发现公式的特殊情况。

## 二、防守奖章的计算

防守奖章的计算首先是基于一个最大值，也就是**取多次防守的最佳值**。比如你们部落总共防守了 5 个部落，分别可以获得 50、70、90、30、60 奖章，那么最后便取最高值 90，其他的较低数值不会有影响。所以在多次的防守中，只要成功坑到一个部落就算成功（手动狗头）。

目前我们不是很确定剩余生命值如何影响最终结果，以下公式可一定程度上满足精度要求：

$$
M = \frac{S - S_a \cdot \displaystyle \frac{H_a}{H}}{25} \quad \text{③\ ④\ ⑤}
$$

其中

- $M$ 为突袭结束后玩家可获得的防守奖章数
- $S$ 为突袭期间进攻方投入的部队总人口数
- $S_a$ 为突袭结束后进攻方剩余的部队人口数
- $H_a$ 为突袭结束后进攻方剩余的部队生命值总和
- $H$ 为突袭期间进攻方投入的部队在满血时的生命值总和

2024 年 4 月更新后，公式加入了部队的剩余生命值这一变量。由于实战中无法获得精确的剩余生命值，因此防守奖章无法精确计算。

如果我们假设进攻方剩余的部队全部满血，即 $\displaystyle \frac{H_a}{H} = 1$，则可得到以下近似公式：

$$
M \approx \frac{S - S_a}{25} \quad \text{③\ ④}
$$

如果我们假设进攻方剩余的部队全部空血，即 $\displaystyle \frac{H_a}{H} = 0$，则可得到以下近似公式：

$$
M \approx \frac{S}{25} \quad \text{③\ ④}
$$

在实际计算时，可能出现误差的地方如下：

- 为方便起见，我们通常会用对方的兵营容量 × 进攻次数计算 $S$ 的值。在大部分情况下，对方单次的进攻兵力是恒定的，但如果对方打到一半升级了兵营（计算值偏小），或者对方兵没有下完就结束战斗（计算值偏大），就会引入一些偏差。
- 剩余的部队人口数可以通过每次被三星后对方额外增加的都城币反推，但如果对方兵没有下完就结束战斗了，就会使计算值偏大。
- 在现实中，进攻方剩余的部队全部满血或全部空血的概率约等于零。如果我们假设了进攻方剩余的部队全部满血，则计算值会偏大，反之计算值会偏小。

此外，在存在小数点的情况下，遵循四舍五入原理，**法术不计入人口，兵种的衍生物（包括骷髅、骷髅飞骑、被摧毁的突袭炮车）不会被计入人口**<sup>⑥</sup>。

在 2022 年 12 月更新后，都城野蛮人被赋予了人口，每个都城野蛮人为 1.25 人口。同时，野蛮人攻城槌不再计算人口，突袭炮车由原本的 30 人口调整为 25 人口。在更新后，一整组的攻城槌和突袭炮车仍然是 5 人口和 30 人口，但计算得更为精细了。在原来的版本中，野蛮人攻城锤只要撞上城墙就算被防守方消灭。而现版本则还需要消灭爆出来的四个都城野蛮人。所以各位在计算防守奖章的时候请务必注意这一点，否则可能会引入一定的偏差。

此外这次更新暂不清楚会不会影响野蛮人攻城锤在取得三星时进行额外紫币结算的人口计算，但关于紫币的相关内容并非本文的重点所以不赘述。

部落中的全体参战人员都会获得相等的防守收益，不受进攻次数的影响（出 1 刀还是 6 刀都一样），也不会在成员之间均分（10 个人和 50 人都一样）。

根据上面的公式和规则我们可以得到以下的两条结论以及启发：

1、公式内并不包含对方的进攻刀数，也就是和刀数无关。举个例子，在一些情况下，对方可能会去清理一个可以无伤推平的残局，而在这一局中进攻方投入的人口 = 剩余人口，故这一刀不会提供任何的防守奖章。而这也说明了把电塔藏起来并不能起到任何效果，反而会因为失去了这个电塔的防守作用而降低防守奖章，属于损人损己的行为。

2、部分部落可能会选择摆互刷阵，理由是会被进攻更多次，并试图获得更大的收益。但实际情况是更多次的进攻也不会增加获得的奖章数量，反而会因为互刷阵降低对方的人口消耗，从而适得其反，成为对手纯粹的福利。此外，官方对于都城互刷的态度已经较为明确——反对和打击。继续使用互刷阵可能会面临官方的惩罚。

防守部分的公式并非本人率先发现，而原创者暂不可考，在此先感谢他的研究成果。

## 三、奖励上限

在当前版本，都城币和突袭奖章的奖励均设有上限。我之前问过一位带领高级都城的大佬，对方表示正常打几乎不可能达到上限，所以目前认为这些限制仅针对互刷玩家。

突袭奖章的进攻奖励最高为每刀 270 奖章，6 刀共计 1620 奖章。防守奖励最高为 350 奖章。

都城币的进攻奖励最高为每刀 6 100 都城币，6 刀就是 36 600 都城币，这个奖励甚至已经爆仓了。不过都城币的相关内容和本文无关，所以不做赘述。

## 注释

① 理论上，只有都城大本营升级到 2 级时才能加入突袭，所以 1 级都城大本营的奖章数据其实没有意义。但解包的结果显示官方确实给 1 级都城大本填上了奖章数据（45），所以为了保险起见，还是放入了表格中。

② 在 2022 年 6 月 30 日的一次平衡性调整中，官方宣布将防守奖励增加 100%，而进攻奖励减少 10%。在这次平衡性调整前，1 到 10 级都城大本营可以提供的奖章数量分别为 50、200、400、650、900、1240、1380、1400、1530、1610。1 到 5 级子城大本营则分别为 150、250、390、450、510。

③ 在 2022 年 6 月 30 日的平衡性调整中，由于防守奖励增加了 100%，所以在这之前的公式中，应该是除以 50，而非现在的 25.

④ 准确地说，“人口”并非是一个严谨的描述。通过解包我们可以得知，决定消灭每一个兵种能提供多少防守奖励的是一个叫做 DefenseBonus 的属性，只不过这个属性和人口挂钩——一般而言，每 1 个人口对应的是 100 点 DefenseBonus，但也有例外。比如单个火箭气球兵是 8 人口，但因为一组两个的火箭气球兵是 15 人口，所以单个火箭气球兵的 DefenseBonus 就被设置成了 750，用于适应一组 15 人口的数值（750 × 2=1500）。而亡灵大军则是一个更为离谱的单位，由于 1000 无法被 6 整除，所以人口为 2 的单个亡灵被赋予了 167 的 DefenseBonus，也就是 6 个亡灵的总数为 1002，是唯一一个人口与实际奖励脱钩的兵种。当然这个脱钩是无伤大雅的，譬如对方在一次突袭中投入并被消灭了 400 人口的亡灵（也就是 40 组，按 20 次进攻的话，每人平均带了 2 组），那么实际情况会比按照人口进行的计算要多出 0.032 突袭奖章。所以，如果某次计算中发现本应被舍去的数值反而被进到更大的数值，那么说不定就是亡灵在捣鬼（当然出现其他误差的概率要更大，手动狗头）。

⑤ 在 2024 年 4 月更新前，只要部队未被消灭，就计入剩余人口，与剩余生命值无关，也就是说在这次更新之前，$\displaystyle \frac {H_a}{H} = 1$ 恒成立，此时 $\displaystyle M = \frac{S - S_a}{25}$ 为精确公式，而非近似公式。

⑥ 兵种的衍生物不被计入人口的原因本质上是因为他们的 DefenseBonus 数值为 0，实际上他们是有人口的（比如都城野蛮人和骷髅都是 1，骷髅飞骑是 2）。但 DefenseBonus 为 0 的却不全是兵种衍生物，典型（也是唯一）的例子便是野猪突袭队。野猪突袭队中包括 2 只野猪骑士和 1 只野猪飞骑，而只有野猪骑士拥有 500 的 DefenseBonus，野猪飞骑的则为 0。所以只有等到野猪飞骑落地转变为野猪骑士之后，整个小队才拥有 1500 点的DefenseBonus。目前暂不清楚如果一只野猪飞骑在三星结算额外都城币的时候尚未落地，那么会不会影响到结算（把飞天野猪不当成需要被结算人口的兵从而让结算的都城币变少）。如果果真如此，那么又是一个可喜可贺的 bug（手动狗头）。另外，有些会解包的大佬可能会说都城野蛮人、骷髅、骷髅飞骑和损坏的突袭炮车在 IsSecondaryTroop 下拥有 TRUE 的属性（也就是说明它们是衍生兵种），所以可以通过排除衍生兵种的方式排除这些单位，最后的结算按照人口来。但很不幸的是都城的野猪骑士（不是野猪飞骑），也拥有 TRUE 的属性。所以结算大概率还是按照 DefenseBonus 来的。

## 参考文献

- [部落冲突 2022 年更新](/p/2316)
- [部落冲突升级数据（都城）](/upgrade/category/capital)
- [部落都城是什么？这个模式的机制是什么样的？](/p/3844)
- [都城突袭周末机制详解](/p/6491)
- [都城进攻方面知识浅科普（B 站）](https://www.bilibili.com/video/BV1Ct4y1P7X9/)
- [都城运营的六个常见问题与解决建议（B 站）](https://www.bilibili.com/video/BV1h14y1p7ck/)
- [shohit 在评论区提出的防守公式（B 站）](https://t.bilibili.com/731080627398377473)
- 2024 年 4 月更新：[Temperamental Tentacles Update! × Clash of Clans](https://supercell.com/en/games/clashofclans/blog/release-notes/temperamental-tentacles-update/)
- 本文的 B 站专栏链接：[部落都城突袭奖章计算公式解析](https://www.bilibili.com/read/cv19967189/)